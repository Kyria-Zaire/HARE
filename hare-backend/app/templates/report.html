<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Rapport Capillaire HARE Pro</title>
  <style>
    * { box-sizing: border-box; }
    body { font-family: sans-serif; font-size: 11pt; color: #444; background: #faf8f5; margin: 0; padding: 24px; }
    .header { text-align: center; padding-bottom: 16px; border-bottom: 2px solid #9B1C2C; }
    .logo { font-size: 24pt; font-weight: 700; color: #800000; margin: 0; }
    .section-title { font-size: 16pt; color: #800000; margin: 20px 0 10px; }
    .product-card { margin-bottom: 20px; padding: 16px; background: #fff; border: 1px solid #e8d5c4; border-radius: 8px; }
    .product-name { font-weight: 600; color: #5c3d1e; }
    .product-price { color: #9B1C2C; font-weight: 600; }
    .profile-box { background: #fef9f3; border: 1px solid #ecd9c8; padding: 12px; margin-bottom: 16px; border-radius: 8px; }
  </style>
</head>
<body>
  <div class="header">
    <h1 class="logo">HARE Pro</h1>
    <p>Rapport Capillaire Personnalisé – {{ report_date }}</p>
  </div>
  <h2 class="section-title">Votre profil</h2>
  <div class="profile-box">
    <p><strong>Type :</strong> {{ answers.hair_types | default(['—']) | join(', ') }}</p>
    <p><strong>Préoccupations :</strong> {{ answers.concerns | default(['—']) | join(', ') }}</p>
    <p><strong>Porosité :</strong> {{ answers.porosity | default('—') }}</p>
    <p><strong>Objectifs :</strong> {{ answers.goals | default(['—']) | join(', ') }}</p>
  </div>
  <h2 class="section-title">Recommandations</h2>
  {% for product in recommended_products %}
  <div class="product-card">
    {% if product.image_url %}
    <img src="{{ product.image_url }}" alt="{{ product.name }}" width="120" height="120" style="object-fit:cover;" />
    {% else %}
    <div style="width:120px;height:120px;background:#f5f5f4;display:flex;align-items:center;justify-content:center;color:#a8a29e;border-radius:8px;">Image non disponible</div>
    {% endif %}
    <p class="product-name">{{ product.name }}</p>
    <p>{{ product.brand }} – <span class="product-price">{{ "%.2f" % product.price }} €</span></p>
    {% if product.explanation %}<p style="font-style:italic;color:#555;">{{ product.explanation }}</p>{% endif %}
    <p><strong>Conseils :</strong></p>
    <ul>
      {% for tip in product.usage_tips %}<li>{{ tip }}</li>{% endfor %}
    </ul>
  </div>
  {% endfor %}
  <h2 class="section-title">Conseils personnalisés</h2>
  <ul>
    {% for tip in general_tips %}<li>{{ tip }}</li>{% endfor %}
  </ul>
  <footer style="margin-top:24px;padding-top:16px;border-top:1px solid #e8d5c4;text-align:center;font-size:9pt;color:#888;">
    Généré par HARE Pro pour {{ salon_name }}
  </footer>
</body>
</html>
